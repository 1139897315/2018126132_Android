# 生命周期回调函数在四种模式下的触发条件和运行机制(标准模式,单顶模式,单任务模式,单实例模式)

## 一、FirstActivity（主活动）、SecondActivity均默认使用standard模式

### 打开应用，主活动（活动一）被创建

![image-20200920231129452](README.assets/image-20200920231129452.png)

### Home键返回桌面，活动停止但未被销毁

![image-20200920231151130](README.assets/image-20200920231151130.png)

### 返回应用，活动恢复，因为活动之前没被销毁所以无需重新创建![image-20200920231220787](README.assets/image-20200920231220787.png)

### 返回键退出应用，活动销毁![image-20200920231248820](README.assets/image-20200920231248820.png)

### 【打开应用】活动一切换到活动二，活动一停止，活动二被创建（活动一切换到活动一亦同理）![image-20200920231326546](README.assets/image-20200920231326546.png)

### 活动二返回到活动一，活动二位于栈顶被销毁，活动一回到栈顶恢复运行![image-20200920231828134](README.assets/image-20200920231828134.png)

***



## 二、FirstActivity（主活动）使用singleTop模式。SecondActivity使用singleTask模式。ThirdActivity使用singleInstance模式。

### 【打开应用】活动一切换到活动一，活动一因位于栈顶而不创建新活动，直接暂停再恢复运行

![image-20200924123006148](README.assets/image-20200924123006148.png)

### 按一次返回即退出应用

![image-20200924123113918](README.assets/image-20200924123113918.png)

### 【打开应用】活动一①切换到活动二，因为活动二不存在于栈中，所以新创建活动二

![image-20200924123441185](README.assets/image-20200924123441185.png)



### 活动二切换到活动一②，此时位栈顶的是活动二而不是活动一①，所以活动二停止，新创建活动一②。

![image-20200924123511737](README.assets/image-20200924123511737.png)

### 活动一②切换到活动二，因为活动二存在于栈中，所以直接恢复运行使用而无需新创建，并使活动二之上的活动一②出栈销毁。

![image-20200924123549915](README.assets/image-20200924123549915.png)

### 此时按返回键，活动二位于栈顶出栈被销毁，活动一①回到栈顶恢复运行

![image-20200924123635396](README.assets/image-20200924123635396.png)

### 再按返回键，活动一①位于栈顶出栈被销毁，退出应用

![image-20200924123712674](README.assets/image-20200924123712674.png)

### 【打开应用】活动一切换到活动三，再切换到活动二。可以看到活动三的返回栈不同于活动一和二。

![image-20200924121935393](README.assets/image-20200924121935393.png)

### 按返回键，返回到活动一。因为活动一和二存放在同一个栈，活动二出栈销毁，活动一成为栈顶活动显示在界面上。

![image-20200924122142697](README.assets/image-20200924122142697.png)

### 再按返回键，返回活动三。因为活动一出栈销毁，此时当前栈已空，于是显示另一个返回栈的栈顶活动，即活动三。

![image-20200924122402687](README.assets/image-20200924122402687.png)

### 再按返回键，程序退出。因为此时所有返回栈已空。

![image-20200924122632655](README.assets/image-20200924122632655.png)